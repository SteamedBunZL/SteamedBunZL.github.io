---
layout:     post
title:      "C语言学习笔记（一）指针"
date:       2017-09-19 12:00:00
author:     "ZhangLong"
catalog: true
---



因为平时能用到C的地方实在太少了，特此记录，重新自学一遍C语言，加深记忆

## 一、指针数组以及多级指针


#### 1.指针数组

直接上code

```c
int main(){
  int a*[10];//定义了一个指针数组，一共10个成员，其中每个成员都是int *类型
  printf("%d,%d\n",sizeof(a),sizeof(a[0]));//输出 40，4
  
  short *b[10];//定义了一个指针数组，一共10个成员，其中每个成员都是int *类型
  printf("%d,%d\n",sizeof(b),sizeof(b[0]));//输出 40，4
  
  //指针是地址，地址在同一个操作系统中是同样的大小的，比如4个字节，或者8个字节
  
  
}
```



#### 2.指向指针的指针

```c
int main(){
  int a = 10;
  int *p = &a;
  int **p = &p;//定义一个二级指针，指向一个一级指针的地址
  // 相当于 int **pp;  pp = &p;
  **pp = 100;//通过二级指针修改内存的值
  *p = 10;//千万不要这样写，这样相当于将p指向了编号为10的这块内存 这样写后，pp还是正常的指针，p就变成野指针
  printf("a = %d\n",a);//输出 100
  
  return 0;
}
```

如图所示关系



![image_point1](/img/image_point1.png)





#### 3.会带来更多的问题

```c
int main(){
  int a = 10;
  int *p = &a;
  int **p = &p;//定义一个二级指针，指向一个一级指针的地址
  // 相当于 int **pp;  pp = &p;
  **pp = 100;//通过二级指针修改内存的值
  *p = 10;//千万不要这样写，这样相当于将p指向了编号为10的这块内存 这样写后，pp还是正常的指针，p就变成野指针
  printf("a = %d\n",a);//输出 100
  
  int ***ppp = &pp;//定义了一个三级指针，指向一个二级指针的地址
  ****ppp = 0;
  printf("a = %d\n",);
  
  a = ppp;//等同于a = &pp
  printf("%d\n",***ppp);//19652
  
  printf("%d,%d,%d,%d\n",***ppp,&p,&pp,&ppp);//1375048,1375060,1375048,1375036
  return 0;
}
```

**C语言允许定义多级指针，但是指针级数过多，会增加代码的复杂性，考试的时候可能会考多级指针，但实际编程的时候最多用到3级，但3级指针也不常用，一级和二级指针是大量使用。**


## 二、指向多维数组的指针


```c
    int main(){
      int buf[2][3] = {{1,2,3},{4,5,6}};
      
      int *p[3];//指针数组
      
      int (*p)[3];//定义了一个指针，不是数组，注意这里。。。指向int [3]这种数据类型，指向二维数组的指针
      p = buff;//p指向了二维数组上的第一行
      p++;//指向了二维数组的第二行
      printf("%d\n",sizeof(p));// 输出 4 证明了这是一个指针而不是一个数组
      printf("%d,%d\n",p,p+1);//输出3276484，3276496  p+1 在内存中增加了12
      //加1是什么意思？位移了了1*sizeof(int [3])字节
      //printf("%d,%d\n,p,p+2"); 位移了2*sizeof(int [3])字节
      
      //怎么去定义他？
      int i;
      int j;
      for(i = 0;i<2;i++){
          for(j = 0;j<3;j++){
              printf("%d\n",p[i][j]);
              //printf("%d\n", *(*(p + i) + j));
          }
      }
      
      return 0;
    }

```
![image_point2](/img/image_point2.png)



